{
    "sourceFile": "pages/dashboard/page.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1755827755438,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1755827755438,
            "name": "Commit-0",
            "content": "\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { auth, db } from \"../../lib/firebase\";\nimport { doc, getDoc } from \"firebase/firestore\";\n\nexport default function Dashboard() {\n  const [user, loading] = useAuthState(auth);\n  const [userData, setUserData] = useState(null);\n  const [courses, setCourses] = useState([]);\n  const [enrollments, setEnrollments] = useState([]);\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!loading) {\n      if (!user) {\n        router.push(\"/login\");\n        return;\n      }\n\n      // Obtener rol y nombre del usuario desde Firestore\n      const fetchUserData = async () => {\n        try {\n          const userDoc = await getDoc(doc(db, \"users\", user.uid));\n          if (userDoc.exists()) {\n            const data = userDoc.data();\n            setUserData(data);\n\n            // Si es profesor, cargar sus cursos\n            if (data.role === \"teacher\") {\n              const teacherCourses = []; // Aquí cargarías los cursos del profesor\n              // Ejemplo: query(where('teacherId', '==', user.uid))\n              setCourses(teacherCourses);\n            }\n\n            // Si es estudiante, cargar sus inscripciones\n            if (data.role === \"student\") {\n              const studentEnrollments = []; // Aquí cargarías las inscripciones\n              // Ejemplo: query(where('userId', '==', user.uid))\n              setEnrollments(studentEnrollments);\n            }\n          } else {\n            // Si no existe el doc, redirigir a registro completo\n            router.push(\"/onboarding\"); // Opcional: completar perfil\n          }\n        } catch (error) {\n          console.error(\"Error al cargar datos del usuario:\", error);\n        }\n      };\n\n      fetchUserData();\n    }\n  }, [user, loading, router]);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <p className=\"text-lg text-gray-600\">Cargando...</p>\n      </div>\n    );\n  }\n\n  if (!user) return null;\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <nav className=\"bg-white shadow-sm p-4\">\n        <div className=\"max-w-6xl mx-auto flex justify-between items-center\">\n          <h1 className=\"text-xl font-bold text-blue-600\">Academia Online</h1>\n          <div className=\"flex items-center gap-4\">\n            <span className=\"text-sm text-gray-700\">\n              Hola, <strong>{userData?.name || user.email}</strong>\n            </span>\n            <button\n              onClick={() => auth.signOut().then(() => router.push(\"/login\"))}\n              className=\"text-sm bg-red-100 hover:bg-red-200 text-red-700 px-3 py-1 rounded transition\"\n            >\n              Salir\n            </button>\n          </div>\n        </div>\n      </nav>\n\n      <div className=\"p-6 max-w-6xl mx-auto\">\n        <h2 className=\"text-2xl font-semibold text-gray-800 mb-6\">\n          Bienvenido al Dashboard\n        </h2>\n\n        {userData?.role === \"teacher\" && (\n          <div className=\"bg-white p-6 rounded-lg shadow mb-8\">\n            <h3 className=\"text-xl font-medium text-gray-800 mb-4\">\n              Panel del Profesor\n            </h3>\n            <p className=\"text-gray-600 mb-4\">\n              Puedes crear y gestionar tus cursos desde aquí.\n            </p>\n            <button\n              onClick={() => router.push(\"/teacher\")}\n              className=\"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 rounded-lg transition\"\n            >\n              Ir al Panel de Profesor\n            </button>\n          </div>\n        )}\n\n        {userData?.role === \"student\" && (\n          <div className=\"bg-white p-6 rounded-lg shadow mb-8\">\n            <h3 className=\"text-xl font-medium text-gray-800 mb-4\">\n              Tus Cursos\n            </h3>\n            {enrollments.length > 0 ? (\n              <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n                {/* Ejemplo de curso inscrito */}\n                {enrollments.map((enrollment) => (\n                  <div\n                    key={enrollment.courseId}\n                    className=\"border rounded-lg p-4 hover:shadow-md transition cursor-pointer\"\n                    onClick={() =>\n                      router.push(`/courses/${enrollment.courseId}`)\n                    }\n                  >\n                    <h4 className=\"font-medium text-gray-800\">\n                      Curso de Ejemplo\n                    </h4>\n                    <p className=\"text-sm text-gray-500 mt-1\">\n                      Progreso: {enrollment.progress?.length || 0}/10 lecciones\n                    </p>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <p className=\"text-gray-500\">\n                Aún no estás inscrito en ningún curso.\n              </p>\n            )}\n            <button\n              onClick={() => router.push(\"/courses\")}\n              className=\"mt-4 text-blue-600 hover:underline text-sm font-medium\"\n            >\n              Ver todos los cursos disponibles →\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"
        }
    ]
}