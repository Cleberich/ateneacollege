{
    "sourceFile": "pages/_app.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 8,
            "patches": [
                {
                    "date": 1755827026209,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1755827151571,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,52 +1,51 @@\n-// pages/_app.js\n+// components/Layout.js o pages/_app.js\n import { useEffect, useState } from \"react\";\n import { useAuthState } from \"react-firebase-hooks/auth\";\n import { auth, db } from \"../lib/firebase\";\n import { doc, getDoc } from \"firebase/firestore\";\n-import Layout from \"../components/Layout\";\n-import \"../styles/globals.css\";\n+import Navbar from \"./Navbar\";\n \n-function MyApp({ Component, pageProps }) {\n-  const [user, loading] = useAuthState(auth);\n+export default function Layout({ children }) {\n+  const [user, setUser] = useState(null);\n   const [userData, setUserData] = useState(null);\n+  const [loadingAuth, setLoadingAuth] = useState(true);\n \n+  // Solo ejecuta en el cliente\n   useEffect(() => {\n-    const fetchUserData = async () => {\n-      if (user) {\n+    const unsubscribe = auth.onAuthStateChanged(async (currentUser) => {\n+      if (currentUser) {\n+        setUser(currentUser);\n         try {\n-          const userDocRef = doc(db, \"users\", user.uid);\n+          const userDocRef = doc(db, \"users\", currentUser.uid);\n           const userDocSnap = await getDoc(userDocRef);\n-          if (userDocSnap.exists()) {\n-            setUserData(userDocSnap.data());\n-          } else {\n-            setUserData(null);\n-          }\n+          setUserData(userDocSnap.exists() ? userDocSnap.data() : null);\n         } catch (err) {\n-          console.error(\"Error al cargar usuario:\", err);\n+          console.error(\"Error al cargar datos del usuario:\", err);\n           setUserData(null);\n         }\n       } else {\n+        setUser(null);\n         setUserData(null);\n       }\n-    };\n+      setLoadingAuth(false);\n+    });\n \n-    fetchUserData();\n-  }, [user]);\n+    return () => unsubscribe();\n+  }, []);\n \n-  // Mientras carga el usuario, puedes mostrar un loader o renderizar sin datos\n-  if (typeof window !== \"undefined\" && loading) {\n+  // Mientras carga, puedes mostrar un loader o renderizar sin user\n+  if (loadingAuth) {\n     return (\n-      <div className=\"flex items-center justify-center min-h-screen\">\n-        <p>Cargando...</p>\n+      <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\n+        <p>Cargando autenticación...</p>\n       </div>\n     );\n   }\n \n   return (\n-    <Layout user={user} userData={userData}>\n-      <Component {...pageProps} />\n-    </Layout>\n+    <>\n+      <Navbar user={user} userData={userData} />\n+      <main>{children}</main>\n+    </>\n   );\n }\n-\n-export default MyApp;\n"
                },
                {
                    "date": 1755827166903,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n import { useEffect, useState } from \"react\";\n import { useAuthState } from \"react-firebase-hooks/auth\";\n import { auth, db } from \"../lib/firebase\";\n import { doc, getDoc } from \"firebase/firestore\";\n-import Navbar from \"./Navbar\";\n+import Navbar from \"./components/Navbar\";\n \n export default function Layout({ children }) {\n   const [user, setUser] = useState(null);\n   const [userData, setUserData] = useState(null);\n"
                },
                {
                    "date": 1755827191131,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n import { useEffect, useState } from \"react\";\n import { useAuthState } from \"react-firebase-hooks/auth\";\n import { auth, db } from \"../lib/firebase\";\n import { doc, getDoc } from \"firebase/firestore\";\n-import Navbar from \"./components/Navbar\";\n+import Navbar from \"@/components/Navbar\";\n \n export default function Layout({ children }) {\n   const [user, setUser] = useState(null);\n   const [userData, setUserData] = useState(null);\n@@ -44,8 +44,9 @@\n \n   return (\n     <>\n       <Navbar user={user} userData={userData} />\n+\n       <main>{children}</main>\n     </>\n   );\n }\n"
                },
                {
                    "date": 1755827235367,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,5 @@\n+import \"../styles/globals.css\";\n // components/Layout.js o pages/_app.js\n import { useEffect, useState } from \"react\";\n import { useAuthState } from \"react-firebase-hooks/auth\";\n import { auth, db } from \"../lib/firebase\";\n"
                },
                {
                    "date": 1755827453733,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,18 +1,18 @@\n-import \"../styles/globals.css\";\n-// components/Layout.js o pages/_app.js\n+// pages/_app.js\n import { useEffect, useState } from \"react\";\n-import { useAuthState } from \"react-firebase-hooks/auth\";\n-import { auth, db } from \"../lib/firebase\";\n+import { auth } from \"../lib/firebase\";\n import { doc, getDoc } from \"firebase/firestore\";\n-import Navbar from \"@/components/Navbar\";\n+import { db } from \"../lib/firebase\";\n+import \"../styles/globals.css\";\n \n-export default function Layout({ children }) {\n+// No uses Layout aquí aún, lo hacemos todo en _app\n+export default function MyApp({ Component, pageProps }) {\n   const [user, setUser] = useState(null);\n   const [userData, setUserData] = useState(null);\n   const [loadingAuth, setLoadingAuth] = useState(true);\n \n-  // Solo ejecuta en el cliente\n+  // Solo se ejecuta en el cliente\n   useEffect(() => {\n     const unsubscribe = auth.onAuthStateChanged(async (currentUser) => {\n       if (currentUser) {\n         setUser(currentUser);\n@@ -33,21 +33,21 @@\n \n     return () => unsubscribe();\n   }, []);\n \n-  // Mientras carga, puedes mostrar un loader o renderizar sin user\n+  // Mientras carga la autenticación\n   if (loadingAuth) {\n     return (\n       <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\n         <p>Cargando autenticación...</p>\n       </div>\n     );\n   }\n \n+  // Renderiza el componente con el Navbar\n   return (\n     <>\n       <Navbar user={user} userData={userData} />\n-\n-      <main>{children}</main>\n+      <Component {...pageProps} />\n     </>\n   );\n }\n"
                },
                {
                    "date": 1755827571140,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n import { useEffect, useState } from \"react\";\n import { auth } from \"../lib/firebase\";\n import { doc, getDoc } from \"firebase/firestore\";\n import { db } from \"../lib/firebase\";\n+import Navbar from \"../components/Navbar\";\n import \"../styles/globals.css\";\n \n // No uses Layout aquí aún, lo hacemos todo en _app\n export default function MyApp({ Component, pageProps }) {\n"
                },
                {
                    "date": 1755831366084,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,19 +1,24 @@\n // pages/_app.js\n+import \"../styles/globals.css\";\n import { useEffect, useState } from \"react\";\n import { auth } from \"../lib/firebase\";\n import { doc, getDoc } from \"firebase/firestore\";\n import { db } from \"../lib/firebase\";\n+import { useRouter } from \"next/router\";\n+\n+// Importa el Navbar solo si no estás en páginas públicas\n import Navbar from \"../components/Navbar\";\n-import \"../styles/globals.css\";\n \n-// No uses Layout aquí aún, lo hacemos todo en _app\n export default function MyApp({ Component, pageProps }) {\n   const [user, setUser] = useState(null);\n   const [userData, setUserData] = useState(null);\n   const [loadingAuth, setLoadingAuth] = useState(true);\n+  const router = useRouter();\n \n-  // Solo se ejecuta en el cliente\n+  // Lista de rutas donde NO se muestra el Navbar\n+  const hideNavbar = [\"/\", \"/login\", \"/register\"];\n+\n   useEffect(() => {\n     const unsubscribe = auth.onAuthStateChanged(async (currentUser) => {\n       if (currentUser) {\n         setUser(currentUser);\n@@ -21,10 +26,9 @@\n           const userDocRef = doc(db, \"users\", currentUser.uid);\n           const userDocSnap = await getDoc(userDocRef);\n           setUserData(userDocSnap.exists() ? userDocSnap.data() : null);\n         } catch (err) {\n-          console.error(\"Error al cargar datos del usuario:\", err);\n-          setUserData(null);\n+          console.error(\"Error al cargar usuario:\", err);\n         }\n       } else {\n         setUser(null);\n         setUserData(null);\n@@ -34,21 +38,22 @@\n \n     return () => unsubscribe();\n   }, []);\n \n-  // Mientras carga la autenticación\n   if (loadingAuth) {\n     return (\n       <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\n         <p>Cargando autenticación...</p>\n       </div>\n     );\n   }\n \n-  // Renderiza el componente con el Navbar\n+  // Renderiza sin Navbar en páginas públicas\n+  const showNavbar = !hideNavbar.includes(router.pathname);\n+\n   return (\n     <>\n-      <Navbar user={user} userData={userData} />\n+      {showNavbar && <Navbar user={user} userData={userData} />}\n       <Component {...pageProps} />\n     </>\n   );\n }\n"
                },
                {
                    "date": 1756235031725,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n   const [loadingAuth, setLoadingAuth] = useState(true);\n   const router = useRouter();\n \n   // Lista de rutas donde NO se muestra el Navbar\n-  const hideNavbar = [\"/\", \"/login\", \"/register\"];\n+  const hideNavbar = [\"/\", \"/login\", \"/register\", \"/ong\"];\n \n   useEffect(() => {\n     const unsubscribe = auth.onAuthStateChanged(async (currentUser) => {\n       if (currentUser) {\n"
                }
            ],
            "date": 1755827026209,
            "name": "Commit-0",
            "content": "// pages/_app.js\nimport { useEffect, useState } from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { auth, db } from \"../lib/firebase\";\nimport { doc, getDoc } from \"firebase/firestore\";\nimport Layout from \"../components/Layout\";\nimport \"../styles/globals.css\";\n\nfunction MyApp({ Component, pageProps }) {\n  const [user, loading] = useAuthState(auth);\n  const [userData, setUserData] = useState(null);\n\n  useEffect(() => {\n    const fetchUserData = async () => {\n      if (user) {\n        try {\n          const userDocRef = doc(db, \"users\", user.uid);\n          const userDocSnap = await getDoc(userDocRef);\n          if (userDocSnap.exists()) {\n            setUserData(userDocSnap.data());\n          } else {\n            setUserData(null);\n          }\n        } catch (err) {\n          console.error(\"Error al cargar usuario:\", err);\n          setUserData(null);\n        }\n      } else {\n        setUserData(null);\n      }\n    };\n\n    fetchUserData();\n  }, [user]);\n\n  // Mientras carga el usuario, puedes mostrar un loader o renderizar sin datos\n  if (typeof window !== \"undefined\" && loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <p>Cargando...</p>\n      </div>\n    );\n  }\n\n  return (\n    <Layout user={user} userData={userData}>\n      <Component {...pageProps} />\n    </Layout>\n  );\n}\n\nexport default MyApp;\n"
        }
    ]
}