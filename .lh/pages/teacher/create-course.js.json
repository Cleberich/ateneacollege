{
    "sourceFile": "pages/teacher/create-course.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1755826050905,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1755827782219,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -72,92 +72,89 @@\n     }\n   };\n \n   return (\n-    <>\n-      <Navbar user={user} userData={userData} />\n-      <div className=\"min-h-screen bg-gray-50 py-8\">\n-        <div className=\"max-w-3xl mx-auto px-4\">\n-          <button\n-            onClick={() => router.back()}\n-            className=\"mb-6 text-blue-600 hover:underline flex items-center gap-1\"\n-          >\n-            ← Volver\n-          </button>\n+    <div className=\"min-h-screen bg-gray-50 py-8\">\n+      <div className=\"max-w-3xl mx-auto px-4\">\n+        <button\n+          onClick={() => router.back()}\n+          className=\"mb-6 text-blue-600 hover:underline flex items-center gap-1\"\n+        >\n+          ← Volver\n+        </button>\n \n-          <h1 className=\"text-3xl font-bold text-gray-800 mb-6\">\n-            Crear Nuevo Curso\n-          </h1>\n+        <h1 className=\"text-3xl font-bold text-gray-800 mb-6\">\n+          Crear Nuevo Curso\n+        </h1>\n \n-          {error && (\n-            <div className=\"p-3 mb-4 bg-red-100 text-red-700 rounded\">\n-              {error}\n-            </div>\n-          )}\n-          {success && (\n-            <div className=\"p-3 mb-4 bg-green-100 text-green-700 rounded\">\n-              {success}\n-            </div>\n-          )}\n+        {error && (\n+          <div className=\"p-3 mb-4 bg-red-100 text-red-700 rounded\">\n+            {error}\n+          </div>\n+        )}\n+        {success && (\n+          <div className=\"p-3 mb-4 bg-green-100 text-green-700 rounded\">\n+            {success}\n+          </div>\n+        )}\n \n-          <form\n-            onSubmit={handleSubmit}\n-            className=\"bg-white p-6 rounded-lg shadow\"\n-          >\n-            <div className=\"mb-5\">\n-              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n-                Título del Curso *\n-              </label>\n-              <input\n-                type=\"text\"\n-                value={title}\n-                onChange={(e) => setTitle(e.target.value)}\n-                required\n-                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none\"\n-                placeholder=\"Ej: Introducción a JavaScript\"\n-              />\n-            </div>\n+        <form\n+          onSubmit={handleSubmit}\n+          className=\"bg-white p-6 rounded-lg shadow\"\n+        >\n+          <div className=\"mb-5\">\n+            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n+              Título del Curso *\n+            </label>\n+            <input\n+              type=\"text\"\n+              value={title}\n+              onChange={(e) => setTitle(e.target.value)}\n+              required\n+              className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none\"\n+              placeholder=\"Ej: Introducción a JavaScript\"\n+            />\n+          </div>\n \n-            <div className=\"mb-5\">\n-              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n-                Descripción *\n-              </label>\n-              <textarea\n-                value={description}\n-                onChange={(e) => setDescription(e.target.value)}\n-                required\n-                rows=\"5\"\n-                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none\"\n-                placeholder=\"Describe brevemente el contenido del curso...\"\n-              ></textarea>\n-            </div>\n+          <div className=\"mb-5\">\n+            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n+              Descripción *\n+            </label>\n+            <textarea\n+              value={description}\n+              onChange={(e) => setDescription(e.target.value)}\n+              required\n+              rows=\"5\"\n+              className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none\"\n+              placeholder=\"Describe brevemente el contenido del curso...\"\n+            ></textarea>\n+          </div>\n \n-            <div className=\"flex gap-3\">\n-              <button\n-                type=\"submit\"\n-                disabled={loading}\n-                className=\"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium rounded-lg transition flex items-center gap-2\"\n-              >\n-                {loading ? (\n-                  <>\n-                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n-                    Creando curso...\n-                  </>\n-                ) : (\n-                  \"Crear Curso\"\n-                )}\n-              </button>\n+          <div className=\"flex gap-3\">\n+            <button\n+              type=\"submit\"\n+              disabled={loading}\n+              className=\"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium rounded-lg transition flex items-center gap-2\"\n+            >\n+              {loading ? (\n+                <>\n+                  <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n+                  Creando curso...\n+                </>\n+              ) : (\n+                \"Crear Curso\"\n+              )}\n+            </button>\n \n-              <button\n-                type=\"button\"\n-                onClick={() => router.push(\"/dashboard\")}\n-                className=\"px-6 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-medium rounded-lg transition\"\n-              >\n-                Cancelar\n-              </button>\n-            </div>\n-          </form>\n-        </div>\n+            <button\n+              type=\"button\"\n+              onClick={() => router.push(\"/dashboard\")}\n+              className=\"px-6 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-medium rounded-lg transition\"\n+            >\n+              Cancelar\n+            </button>\n+          </div>\n+        </form>\n       </div>\n-    </>\n+    </div>\n   );\n }\n"
                }
            ],
            "date": 1755826050905,
            "name": "Commit-0",
            "content": "\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { doc, setDoc, collection } from \"firebase/firestore\";\nimport { auth, db } from \"../../lib/firebase\";\n\nexport default function CreateCoursePage() {\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n\n  const router = useRouter();\n  const [user, loadingAuth] = useAuthState(auth);\n\n  // Si aún carga la autenticación\n  if (loadingAuth) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <p>Cargando...</p>\n      </div>\n    );\n  }\n\n  // Si no hay usuario o no es profesor\n  if (!user) {\n    router.push(\"/login\");\n    return null;\n  }\n\n  if (user && !user.displayName) {\n    // Opcional: redirigir si falta perfil\n    router.push(\"/register\");\n    return null;\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setSuccess(\"\");\n    setLoading(true);\n\n    try {\n      // Referencia a la colección 'courses'\n      const courseRef = doc(collection(db, \"courses\"));\n\n      // Datos del curso\n      await setDoc(courseRef, {\n        id: courseRef.id,\n        title: title.trim(),\n        description: description.trim(),\n        teacherId: user.uid,\n        teacherName: user.displayName,\n        createdAt: new Date(),\n        lessons: [], // Inicialmente vacío\n        studentsCount: 0,\n        progress: {}, // Puede usarse para seguimiento global\n      });\n\n      setSuccess(\"Curso creado con éxito!\");\n      setTimeout(() => {\n        router.push(\"/dashboard\");\n      }, 1500);\n    } catch (err) {\n      console.error(\"Error al crear el curso:\", err);\n      setError(\"No se pudo crear el curso. Intenta de nuevo.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <>\n      <Navbar user={user} userData={userData} />\n      <div className=\"min-h-screen bg-gray-50 py-8\">\n        <div className=\"max-w-3xl mx-auto px-4\">\n          <button\n            onClick={() => router.back()}\n            className=\"mb-6 text-blue-600 hover:underline flex items-center gap-1\"\n          >\n            ← Volver\n          </button>\n\n          <h1 className=\"text-3xl font-bold text-gray-800 mb-6\">\n            Crear Nuevo Curso\n          </h1>\n\n          {error && (\n            <div className=\"p-3 mb-4 bg-red-100 text-red-700 rounded\">\n              {error}\n            </div>\n          )}\n          {success && (\n            <div className=\"p-3 mb-4 bg-green-100 text-green-700 rounded\">\n              {success}\n            </div>\n          )}\n\n          <form\n            onSubmit={handleSubmit}\n            className=\"bg-white p-6 rounded-lg shadow\"\n          >\n            <div className=\"mb-5\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Título del Curso *\n              </label>\n              <input\n                type=\"text\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)}\n                required\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none\"\n                placeholder=\"Ej: Introducción a JavaScript\"\n              />\n            </div>\n\n            <div className=\"mb-5\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Descripción *\n              </label>\n              <textarea\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                required\n                rows=\"5\"\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none\"\n                placeholder=\"Describe brevemente el contenido del curso...\"\n              ></textarea>\n            </div>\n\n            <div className=\"flex gap-3\">\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium rounded-lg transition flex items-center gap-2\"\n              >\n                {loading ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                    Creando curso...\n                  </>\n                ) : (\n                  \"Crear Curso\"\n                )}\n              </button>\n\n              <button\n                type=\"button\"\n                onClick={() => router.push(\"/dashboard\")}\n                className=\"px-6 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-medium rounded-lg transition\"\n              >\n                Cancelar\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n}\n"
        }
    ]
}